"use client";

import { useEffect, useRef } from "react";
import { gsap } from "gsap";
import { ScrollTrigger } from "gsap/ScrollTrigger";


gsap.registerPlugin(ScrollTrigger);

export default function ThirdSection() {
  const containerRef = useRef(null);
  const textRef = useRef(null);

  useEffect(() => {
    if (!textRef.current || !containerRef.current) return;

    const text = textRef.current;
    const words = text.textContent.split(" ");
    
    text.innerHTML = "";
    words.forEach((word, index) => {
      const wordSpan = document.createElement("span");
      wordSpan.className = "word";
      wordSpan.textContent = word;
      text.appendChild(wordSpan);
      
      if (index < words.length - 1) {
        text.appendChild(document.createTextNode(" "));
      }
    });

    const wordElements = text.querySelectorAll(".word");

    const scrollTriggerInstance = gsap.fromTo(
      wordElements,
      {
        opacity: 0.2,
      },
      {
        opacity: 1,
        stagger: 0.3,
        duration: 1,
        ease: "power2.out",
        scrollTrigger: {
          trigger: containerRef.current,
          start: "top 60%",
          end: "bottom 20%",
          scrub: 1,
          markers: false,
        },
      }
    );

    return () => {
      scrollTriggerInstance.scrollTrigger?.kill();
      scrollTriggerInstance.kill();
    };
  }, []);

  return (
    <section
      ref={containerRef}
      className="relative flex items-center flex-col justify-center min-h-screen px-6 md:px-12"
    >
      <div className="absolute top-[70%] left-[5%] sm:left-[1%] md:left-[1%] lg:right-0 lg:top-[-5%] lg:left-[10%] -rotate-18 w-[13.75rem] h-[13.75rem] md:w-[10rem] md:h-[10rem] lg:w-[15rem] lg:h-[21.875rem] z-10 pointer-events-none">
<svg 
  width="230" 
  height="228" 
  viewBox="0 0 230 228" 
  fill="none" 
  xmlns="http://www.w3.org/2000/svg"
  className="w-full h-full"
>
  <path 
    d="M60.6289 77.9797C61.5259 80.3271 62.4121 82.6776 63.2371 85.0551C63.689 86.3097 64.1284 87.5757 64.6636 88.7956C67.5269 95.3042 70.4704 101.783 73.1749 108.361C74.8207 112.419 76.4241 116.493 77.9851 120.585L80.3075 126.729L82.5606 132.899C82.9838 134.159 83.3045 135.451 83.5196 136.762C83.6319 137.295 83.6148 137.847 83.4696 138.372C83.3244 138.897 83.0553 139.38 82.6845 139.782C81.6821 140.917 80.0894 140.708 79.1555 139.168C78.5728 138.152 78.1206 137.067 77.8096 135.939C77.0512 133.384 76.186 130.871 75.2141 128.4C74.2512 125.926 73.1862 123.491 72.0193 121.095C71.3765 119.773 70.6266 118.427 70.2909 117.032C69.2131 112.574 67.1974 108.439 65.7635 104.106C64.6955 100.886 63.3807 97.7417 62.214 94.5508L59.0851 86.0175C58.026 83.1795 57.0371 80.3123 55.986 77.4692C55.6083 76.3503 55.3052 75.2079 55.0787 74.0495C54.8921 72.9488 54.7672 71.8386 54.7045 70.7242C54.6468 69.7386 55.2735 69.544 55.9932 70.4182C57.023 71.6748 57.963 73.0011 58.8065 74.3874C59.1535 74.9563 59.4689 75.5478 59.7592 76.1521C60.0239 76.767 60.2896 77.3841 60.5536 77.9975L60.6289 77.9797Z" 
    fill="#c5ee5b" 
    strokeWidth="2"
  />
  <path 
    d="M133.55 70.4096L133.195 73.6016L132.761 76.789C132.611 77.9165 132.459 79.0498 132.406 80.1846C132.331 81.6986 132.275 83.2135 132.225 84.7285L132.049 89.2703L131.717 98.351L131.281 109.531L130.906 120.714C130.837 121.846 130.686 122.971 130.454 124.081C130.378 124.54 130.194 124.975 129.918 125.351C129.643 125.728 129.282 126.035 128.865 126.248C127.727 126.862 126.531 126.223 126.245 124.698C126.08 123.704 126.045 122.692 126.142 121.688C126.486 117.122 126.54 112.54 126.302 107.967C126.159 106.703 126.161 105.427 126.309 104.163C126.993 100.27 126.86 96.3159 127.308 92.4086C127.642 89.507 127.768 86.5769 128.089 83.6697C128.681 78.4874 129.324 73.3147 130.157 68.1663C130.453 66.2083 131.072 64.3123 131.992 62.5548C132.388 61.7933 133.042 61.9174 133.21 62.8659C133.44 64.2262 133.581 65.6 133.63 66.9785C133.65 68.1185 133.601 69.2587 133.484 70.393L133.55 70.4096Z" 
    fill="#c5ee5b" 
    strokeWidth="2"
  />
  <path 
    d="M194.421 102.622C193.225 104.05 192.023 105.472 190.813 106.89C190.138 107.616 189.508 108.38 188.924 109.18C187.418 111.342 185.959 113.538 184.502 115.732C183.041 117.925 181.568 120.106 180.061 122.262C178.211 124.921 176.333 127.56 174.461 130.203L168.801 138.102C168.19 138.887 167.485 139.596 166.701 140.212C165.969 140.832 164.927 140.846 163.797 140.527C162.151 140.062 161.034 138.642 161.451 137.326C161.744 136.495 162.208 135.733 162.814 135.089C165.446 132.086 167.712 128.786 169.565 125.258C170.083 124.281 170.55 123.211 171.367 122.484C173.963 120.154 175.65 117.144 177.938 114.59C179.631 112.687 181.138 110.633 182.793 108.699C184.269 106.974 185.758 105.262 187.26 103.561L191.874 98.5469C193.07 97.2325 194.566 96.2203 196.237 95.5945C196.402 95.5212 196.585 95.4985 196.763 95.5291C196.941 95.5598 197.105 95.6425 197.236 95.7665C197.366 95.8906 197.456 96.0505 197.494 96.2256C197.532 96.4007 197.516 96.583 197.449 96.7493C197.049 97.8992 196.581 99.0245 196.047 100.119C195.546 100.974 194.982 101.791 194.359 102.564L194.421 102.622Z" 
    fill="#c5ee5b" 
    strokeWidth="2"
  />
  <path 
    d="M207.952 156.49C207.497 156.701 207.051 156.929 206.582 157.113L205.173 157.661C204.67 157.842 204.184 158.065 203.719 158.326C202.503 159.069 201.312 159.859 200.086 160.579C198.867 161.313 197.644 162.04 196.397 162.72C194.863 163.561 193.316 164.374 191.742 165.136L187.022 167.422C186.51 167.626 185.965 167.734 185.414 167.74C184.875 167.778 184.271 167.293 183.681 166.561C182.821 165.494 182.446 164.086 182.929 163.472C183.239 163.107 183.658 162.848 184.126 162.735C186.189 162.125 188.11 161.115 189.778 159.765C190.247 159.391 190.694 158.92 191.295 158.845C193.204 158.586 194.691 157.457 196.443 156.877C197.75 156.455 198.936 155.776 200.227 155.317C202.525 154.488 204.796 153.608 207.13 152.852C208.09 152.525 209.13 152.501 210.104 152.786C210.223 152.823 210.333 152.885 210.425 152.968C210.517 153.051 210.589 153.154 210.637 153.268C210.685 153.382 210.708 153.505 210.703 153.628C210.698 153.752 210.666 153.872 210.608 153.982C210.407 154.265 210.194 154.541 209.973 154.808C209.762 155.074 209.528 155.322 209.274 155.548C208.852 155.881 208.401 156.176 207.926 156.427L207.952 156.49Z" 
    fill="#c5ee5b" 
    strokeWidth="2"
  />
  <path 
    d="M24.8705 145.261C25.9126 145.856 26.9467 146.46 27.9726 147.073C28.5078 147.412 29.063 147.718 29.6353 147.99C31.1881 148.648 32.7365 149.325 34.2737 150.031C35.8076 150.744 37.3128 151.514 38.7894 152.341C40.5944 153.378 42.3695 154.47 44.0954 155.634C45.8215 156.798 47.5148 158.008 49.1752 159.264C49.6712 159.677 50.0933 160.169 50.4239 160.721C50.7716 161.238 50.6542 162 50.2874 162.834C49.7519 164.048 48.6181 164.912 47.78 164.677C47.2631 164.507 46.7992 164.208 46.4333 163.809C44.7121 162.073 42.66 160.694 40.3962 159.752C39.7711 159.483 39.0737 159.283 38.6226 158.786C37.1807 157.188 35.1872 156.42 33.4898 155.2C32.8552 154.75 32.1964 154.334 31.5164 153.955C30.8448 153.561 30.161 153.187 29.4932 152.785C27.1104 151.354 24.7037 149.936 22.2291 148.629C21.206 148.046 20.3986 147.153 19.9258 146.082C19.659 145.587 19.9019 145.055 20.5575 144.802L21.2258 144.621C21.3283 144.587 21.4363 144.574 21.5439 144.582L21.8462 144.588C22.245 144.599 22.6427 144.633 23.0373 144.692C23.3538 144.741 23.664 144.825 23.9628 144.939C24.2543 145.067 24.5411 145.207 24.8341 145.329L24.8705 145.261Z" 
    fill="#c5ee5b" 
    strokeWidth="2"
  />
</svg>






      </div>
      
      <h2
        ref={textRef}
        className="text-4xl md:text-6xl title2 lg:text-6xl xl:text-8xl text-center font-bold leading-tight normal-case relative z-0"
      >
        A glimpse into the brands, websites, and apps we have proudly built
      </h2>
     
    </section>
  );
}
